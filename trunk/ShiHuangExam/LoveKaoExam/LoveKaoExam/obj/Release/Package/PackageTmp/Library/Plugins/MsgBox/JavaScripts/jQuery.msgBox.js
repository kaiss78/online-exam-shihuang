function MsgBox(b,c){this.isVisible=false;this.isInner=false;this.isStop=false;this.timeOutData=[];var a=jQuery.extend({},MsgBox.DEFAULTS,c||{});this.options=a;this.msgBox=jQuery(MsgBox.WRAPPER);this.setBgColor(a.bgColor);this.msgBox.css("display","none").appendTo(document.body);this.moveTo(a.x,a.y);this.wh(a.w,a.h);this.eveHover();this.setContent(b,null);this.setDire();a.show&&this.show()}MsgBox.EF=function(){};jQuery.extend(MsgBox,{WRAPPER:'<div class="tip_msg">    <table cellspacing="0" cellpadding="0" border="0" class="tip_m_bg">        <tr><td class="top_left"><div class="tip_m_bg"></div></td><td class="top_middle"></td><td class="top_right"></td></tr>        <tr><td class="left_middle"></td><td class="tip_m_inner"><br /></td><td class="right_middle"></td></tr>        <tr><td class="bottom_left"><div class="tip_m_bg"></div></td><td class="bottom_middle"></td><td class="bottom_right"></td></tr>    </table></div>',DEFAULTS:{afterShow:MsgBox.EF,beforeShow:MsgBox.EF,afterHide:MsgBox.EF,beforeHide:MsgBox.EF,afterOver:MsgBox.EF,afterOut:MsgBox.EF,beforeUnload:MsgBox.EF,unloadOnHide:false,isAutoHide:false,isTipMsg:false,isDireTop:false,isDireBottom:false,timeOut:0,bgColor:"#fff",clone:false,show:false,innerStyle:""}});MsgBox.prototype={show:function(c){var b={speed:"fast"};$.extend(b,c||{});this.timeOut();if(this.isVisible)return;this.fire("beforeShow");this.msgBox.css("display","block");var a=this;setTimeout(function(){a.eveClick()},200);this.isVisible=true;this.fire("afterShow");return;var a=this;this.msgBox.fadeIn(b.speed||"fast",function(){a.eveClick();a.isVisible=true;a.fire("afterShow")})},hide:function(){if(!this.isVisible)return;this.unClick();this.fire("beforeHide");this.msgBox.css("display","none");this.isVisible=false;this.fire("afterHide");return;var a=this;this.msgBox.fadeOut("fast",function(){a.isVisible=false;a.fire("afterHide");a.options.unloadOnHide&&a.unload()})},hideAndUnload:function(){this.options.unloadOnHide=true;this.hide();return this},unload:function(){this.fire("beforeUnload");this.msgBox.remove()},setElemSite:function(a){this.msgBox.css(a)},setElemAnimate:function(b){this.isStop=true;var a=this,c=a.msgBox.offset(),e=c.top,d=c.left;b=b||{};(b.top!=e||b.left!=d)&&a.msgBox.css("display","none");a.msgBox.css(b).css("display","block");setTimeout(function(){a.isStop=false},200);a.isVisible=true},changeMove:function(a){var g=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),f=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),h=this.msgBox,e=h.width(),d=h.height(),b=a.left,c=a.top,j=g?g-b<e:false,i=f?f-c<d:false;a.left=j?b-e:b;a.top=i?c-d:c;return a},moveElem:function(a){a=this.changeMove(a);this.isVisible?this.setElemAnimate(a):this.setElemSite(a)},moveTo:function(a,b){this.moveToX(a).moveToY(b);return this},moveToX:function(a){a&&this.msgBox.css({left:a});return this},moveToY:function(a){a&&this.msgBox.css({top:a});return this},wh:function(b,a){b&&this.getInner().width(b);a&&this.getInner().height(a)},getVisible:function(){return this.isVisible},setBgColor:function(a){if(!a)return;var b=/[a-z]/gi;if(!b.test(a))a=a.indexOf("#")==-1?"#"+a:a;jQuery(".tip_m_bg",this.msgBox).css("background-color",a)},getInner:function(){return jQuery(".tip_m_inner",this.msgBox)},getContent:function(){return this.getInner().html()},set内部对象属性:function(a,c,b){this.getInner().find(a).attr(c,b);return this},setContent:function(d,b){var c={element:d,innerStyle:this.options.innerStyle},a=Global.URL.Iframe.collect(c);if(this.options.clone)a=a.clone(true);this.getInner().html("").append(a);Global.URL.Iframe.release(a);b&&b()},getIsTipMsg:function(a){return a?a.isTipMsg:this.options.isTipMsg},getDireLeToElem:function(){return jQuery("table tr:first td:first div",this.msgBox)},getDireBtmElem:function(){return jQuery("table tr:last td:first div",this.msgBox)},addDireTop:function(){this.clearDireBtm();this.getIsTipMsg()&&this.getDireLeToElem().removeClass().addClass("dire_top tip_m_bg")},addDireLeft:function(){this.clearDireBtm();this.getIsTipMsg()&&this.getDireLeToElem().removeClass().addClass("dire_left tip_m_bg")},addDireBottom:function(){this.clearDireLeTo();this.getIsTipMsg()&&this.getDireBtmElem().removeClass().addClass("dire_bottom tip_m_bg")},setDire:function(){var a=this.options;if(a.isDireTop)this.addDireTop();else if(a.isDireBottom)this.addDireBottom();else this.addDireLeft()},clearDireLeTo:function(){this.getIsTipMsg()&&this.getDireLeToElem().removeClass("dire_top dire_left")},clearDireBtm:function(){this.getIsTipMsg()&&this.getDireBtmElem().removeClass("dire_bottom")},clearDire:function(){this.clearDireLeTo();this.clearDireBtm()},toggle:function(){this.msgBox[this.isVisible?"hide":"show"]();return this},timeOut:function(){var a=this.options.timeOut;if(!isNaN(a)&&a!=0){this.clearTimeOut();var c=this,b=window.setTimeout(function(){c.hide()},a);this.timeOutData.push(b)}},clearTimeOut:function(){for(var b=this.timeOutData,a=0;a<b.length;a++)window.clearTimeout(b[a]);this.timeOutData=[]},eveHover:function(){var a=this;this.msgBox.hover(function(){a.isInner=true;a.fire("afterOver")},function(){a.isInner=false;a.fire("afterOut")})},unHover:function(){},eveClick:function(){if(!this.options.isAutoHide)return;var a=this;$(document).bind("click",function(){a.isStop||a.isInner||a.hide()})},unClick:function(){if(!this.options.isAutoHide)return;$(document).unbind("click")},remove:function(){this.msgBox.remove()},fire:function(b){var a=this.options;a[b]&&a[b].call(this)},setIndex:function(a){this.msgBox.css("z-index",a||1e3)}}