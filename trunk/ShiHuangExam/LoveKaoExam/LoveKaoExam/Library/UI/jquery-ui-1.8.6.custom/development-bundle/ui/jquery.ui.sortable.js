(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(c,b){if(c==="disabled"){this.options[c]=b;this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")}else a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(c,f){if(this.reverting)return false;if(this.options.disabled||this.options.type=="static")return false;this._refreshItems(c);var b=null,e=this,g=a(c.target).parents().each(function(){if(a.data(this,"sortable-item")==e){b=a(this);return false}});if(a.data(c.target,"sortable-item")==e)b=a(c.target);if(!b)return false;if(this.options.handle&&!f){var d=false;a(this.options.handle,b).find("*").andSelf().each(function(){if(this==c.target)d=true});if(!d)return false}this.currentItem=b;this._removeCurrentsFromItems();return true},_mouseStart:function(b,g,e){var c=this.options,f=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();c.containment&&this._setContainment();if(c.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",c.cursor)}if(c.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",c.opacity)}if(c.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",c.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",b,this._uiHash());!this._preserveHelperProportions&&this._cacheHelperProportions();if(!e)for(var d=this.containers.length-1;d>=0;d--)this.containers[d]._trigger("activate",b,f._uiHash(this));if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return true},_mouseDrag:function(c){this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var b=this.options,d=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-c.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(c.pageY-this.overflowOffset.top<b.scrollSensitivity)this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-c.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(c.pageX-this.overflowOffset.left<b.scrollSensitivity)this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-b.scrollSpeed}else{if(c.pageY-a(document).scrollTop()<b.scrollSensitivity)d=a(document).scrollTop(a(document).scrollTop()-b.scrollSpeed);else if(a(window).height()-(c.pageY-a(document).scrollTop())<b.scrollSensitivity)d=a(document).scrollTop(a(document).scrollTop()+b.scrollSpeed);if(c.pageX-a(document).scrollLeft()<b.scrollSensitivity)d=a(document).scrollLeft(a(document).scrollLeft()-b.scrollSpeed);else if(a(window).width()-(c.pageX-a(document).scrollLeft())<b.scrollSensitivity)d=a(document).scrollLeft(a(document).scrollLeft()+b.scrollSpeed)}d!==false&&a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var h=this.items.length-1;h>=0;h--){var f=this.items[h],e=f.item[0],g=this._intersectsWithPointer(f);if(!g)continue;if(e!=this.currentItem[0]&&this.placeholder[g==1?"next":"prev"]()[0]!=e&&!a.ui.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],e):true)){this.direction=g==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(c,f);else break;this._trigger("change",c,this._uiHash());break}}this._contactContainers(c);a.ui.ddmanager&&a.ui.ddmanager.drag(this,c);this._trigger("sort",c,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(c,e){if(!c)return;a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,c);if(this.options.revert){var b=this,d=b.placeholder.offset();b.reverting=true;a(this.helper).animate({left:d.left-this.offset.parent.left-b.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-b.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){b._clear(c)})}else this._clear(c,e);return false},cancel:function(){var c=this;if(this.dragging){this._mouseUp();if(this.options.helper=="original")this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("deactivate",null,c._uiHash(this));if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",null,c._uiHash(this));this.containers[b].containerCache.over=0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev)a(this.domPosition.prev).after(this.currentItem);else a(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(b){var d=this._getItemsAsjQuery(b&&b.connected),c=[];b=b||{};a(d).each(function(){var d=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);d&&c.push((b.key||d[1]+"[]")+"="+(b.key&&b.expression?d[1]:d[2]))});!c.length&&b.key&&c.push(b.key+"=");return c.join("&")},toArray:function(b){var d=this._getItemsAsjQuery(b&&b.connected),c=[];b=b||{};d.each(function(){c.push(a(b.item||this).attr(b.attribute||"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,k=b+this.helperProportions.width,c=this.positionAbs.top,l=c+this.helperProportions.height,d=a.left,i=d+a.width,e=a.top,h=e+a.height,g=this.offset.click.top,f=this.offset.click.left,j=c+g>e&&c+g<h&&b+f>d&&b+f<i;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:d<b+this.helperProportions.width/2&&k-this.helperProportions.width/2<i&&e<c+this.helperProportions.height/2&&l-this.helperProportions.height/2<h},_intersectsWithPointer:function(b){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),f=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),g=e&&f,c=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return!g?false:this.floating?d&&d=="right"||c=="down"?2:1:c&&(c=="down"?2:1)},_intersectsWithSides:function(b){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),f=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),d=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return this.floating&&c?c=="right"&&f||c=="left"&&!f:d&&(d=="down"&&e||d=="up"&&!e)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(i){var j=this,g=[],d=[],e=this._connectWith();if(e&&i)for(var c=e.length-1;c>=0;c--)for(var h=a(e[c]),f=h.length-1;f>=0;f--){var b=a.data(h[f],"sortable");b&&b!=this&&!b.options.disabled&&d.push([a.isFunction(b.options.items)?b.options.items.call(b.element):a(b.options.items,b.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),b])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var c=d.length-1;c>=0;c--)d[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){for(var c=this.currentItem.find(":data(sortable-item)"),a=0;a<this.items.length;a++)for(var b=0;b<c.length;b++)c[b]==this.items[a].item[0]&&this.items.splice(a,1)},_refreshItems:function(i){this.items=[];this.containers=[this];var m=this.items,n=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],i,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f)for(var c=f.length-1;c>=0;c--)for(var k=a(f[c]),d=k.length-1;d>=0;d--){var b=a.data(k[d],"sortable");if(b&&b!=this&&!b.options.disabled){e.push([a.isFunction(b.options.items)?b.options.items.call(b.element[0],i,{item:this.currentItem}):a(b.options.items,b.element),b]);this.containers.push(b)}}for(var c=e.length-1;c>=0;c--)for(var g=e[c][1],h=e[c][0],d=0,l=h.length;d<l;d++){var j=a(h[d]);j.data("sortable-item",g);m.push({item:j,instance:g,width:0,height:0,left:0,top:0})}},refreshPositions:function(f){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var b=this.items.length-1;b>=0;b--){var c=this.items[b],e=this.options.toleranceElement?a(this.options.toleranceElement,c.item):c.item;if(!f){c.width=e.outerWidth();c.height=e.outerHeight()}var d=e.offset();c.left=d.left;c.top=d.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var b=this.containers.length-1;b>=0;b--){var d=this.containers[b].element.offset();this.containers[b].containerCache.left=d.left;this.containers[b].containerCache.top=d.top;this.containers[b].containerCache.width=this.containers[b].element.outerWidth();this.containers[b].containerCache.height=this.containers[b].element.outerHeight()}return this},_createPlaceholder:function(e){var b=e||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var d=c.placeholder;c.placeholder={element:function(){var c=a(document.createElement(b.currentItem[0].nodeName)).addClass(d||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!d)c.style.visibility="hidden";return c},update:function(e,a){if(d&&!c.forcePlaceholderSize)return;!a.height()&&a.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));!a.width()&&a.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(d){for(var g=null,b=null,c=this.containers.length-1;c>=0;c--){if(a.ui.contains(this.currentItem[0],this.containers[c].element[0]))continue;if(this._intersectsWith(this.containers[c].containerCache)){if(g&&a.ui.contains(this.containers[c].element[0],g.element[0]))continue;g=this.containers[c];b=c}else if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",d,this._uiHash(this));this.containers[c].containerCache.over=0}}if(!g)return;if(this.containers.length===1){this.containers[b]._trigger("over",d,this._uiHash(this));this.containers[b].containerCache.over=1}else if(this.currentContainer!=this.containers[b]){for(var i=1e4,f=null,h=this.positionAbs[this.containers[b].floating?"left":"top"],e=this.items.length-1;e>=0;e--){if(!a.ui.contains(this.containers[b].element[0],this.items[e].item[0]))continue;var j=this.items[e][this.containers[b].floating?"left":"top"];if(Math.abs(j-h)<i){i=Math.abs(j-h);f=this.items[e]}}if(!f&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[b];f?this._rearrange(d,f,null,true):this._rearrange(d,null,this.containers[b].element,true);this._trigger("change",d,this._uiHash());this.containers[b]._trigger("change",d,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[b]._trigger("over",d,this._uiHash(this));this.containers[b].containerCache.over=1}},_createHelper:function(d){var c=this.options,b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;!b.parents("body").length&&a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);if(b[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};(b[0].style.width==""||c.forceHelperSize)&&b.width(this.currentItem.width());(b[0].style.height==""||c.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string")b=b.split(" ");if(a.isArray(b))b={left:+b[0],top:+b[1]||0};if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c=this.options;if(c.containment=="parent")c.containment=this.helper[0].parentNode;if(c.containment=="document"||c.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(c.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(c.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(c.containment)){var b=a(c.containment)[0],d=a(c.containment).offset(),e=a(b).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(f,c){if(!c)c=this.position;var b=f=="absolute"?1:-1,g=this.options,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())*b)}},_generatePosition:function(e){var b=this.options,h=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=/(html|body)/i.test(h[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var f=e.pageX,g=e.pageY;if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0])f=this.containment[0]+this.offset.click.left;if(e.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+this.offset.click.top;if(e.pageX-this.offset.click.left>this.containment[2])f=this.containment[2]+this.offset.click.left;if(e.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){var d=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?!(d-this.offset.click.top<this.containment[1]||d-this.offset.click.top>this.containment[3])?d:!(d-this.offset.click.top<this.containment[1])?d-b.grid[1]:d+b.grid[1]:d;var c=this.originalPageX+Math.round((f-this.originalPageX)/b.grid[0])*b.grid[0];f=this.containment?!(c-this.offset.click.left<this.containment[0]||c-this.offset.click.left>this.containment[2])?c:!(c-this.offset.click.left<this.containment[0])?c-b.grid[0]:c+b.grid[0]:c}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(f,a,c,d){c?c[0].appendChild(this.placeholder[0]):a.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?a.item[0]:a.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var b=this,e=this.counter;window.setTimeout(function(){e==b.counter&&b.refreshPositions(!d)},0)},_clear:function(e,d){this.reverting=false;var c=[],f=this;!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var b in this._storedCSS)if(this._storedCSS[b]=="auto"||this._storedCSS[b]=="static")this._storedCSS[b]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!d&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!d&&c.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){!d&&c.push(function(a){this._trigger("remove",a,this._uiHash())});for(var b=this.containers.length-1;b>=0;b--)if(a.ui.contains(this.containers[b].element[0],this.currentItem[0])&&!d){c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[b]));c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[b]))}}for(var b=this.containers.length-1;b>=0;b--){!d&&c.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[b]));if(this.containers[b].containerCache.over){c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[b]));this.containers[b].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!d){this._trigger("beforeStop",e,this._uiHash());for(var b=0;b<c.length;b++)c[b].call(this,e);this._trigger("stop",e,this._uiHash())}return false}!d&&this._trigger("beforeStop",e,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!d){for(var b=0;b<c.length;b++)c[b].call(this,e);this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||a([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:c?c.element:null}}});a.extend(a.ui.sortable,{version:"1.8.6"})})(jQuery)