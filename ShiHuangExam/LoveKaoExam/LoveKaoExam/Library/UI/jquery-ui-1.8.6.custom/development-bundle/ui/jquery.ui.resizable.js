(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var d=this,b=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!b.aspectRatio,aspectRatio:b.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=b.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all")this.handles="n,e,s,w,se,sw,ne,nw";var g=this.handles.split(",");this.handles={};for(var f=0;f<g.length;f++){var c=a.trim(g[f]),h="ui-resizable-"+c,e=a('<div class="ui-resizable-handle '+h+'"></div>');/sw|se|ne|nw/.test(c)&&e.css({zIndex:++b.zIndex});"se"==c&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[c]=".ui-resizable-"+c;this.element.append(e)}}this._renderAxis=function(c){c=c||this.element;for(var b in this.handles){if(this.handles[b].constructor==String)this.handles[b]=a(this.handles[b],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var e=a(this.handles[b],this.element),d=0;d=/sw|ne|nw|se|n|s/.test(b)?e.outerHeight():e.outerWidth();var f=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");c.css(f,d);this._proportionallyResize()}if(!a(this.handles[b]).length)continue}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!d.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);d.axis=a&&a[1]?a[1]:"se"}});if(b.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){a(this).removeClass("ui-resizable-autohide");d._handles.show()},function(){if(!d.resizing){a(this).addClass("ui-resizable-autohide");d._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){c(this.element);var b=this.element;b.after(this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);c(this.originalElement);return this},_mouseCapture:function(c){var b=false;for(var d in this.handles)if(a(this.handles[d])[0]==c.target)b=true;return!this.options.disabled&&b},_mouseStart:function(g){var d=this.options,i=this.element.position(),b=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(b.is(".ui-draggable")||/absolute/.test(b.css("position")))&&b.css({position:"absolute",top:i.top,left:i.left});a.browser.opera&&/relative/.test(b.css("position"))&&b.css({position:"relative",top:"auto",left:"auto"});this._renderProxy();var e=c(this.helper.css("left")),f=c(this.helper.css("top"));if(d.containment){e+=a(d.containment).scrollLeft()||0;f+=a(d.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:e,top:f};this.size=this._helper?{width:b.outerWidth(),height:b.outerHeight()}:{width:b.width(),height:b.height()};this.originalSize=this._helper?{width:b.outerWidth(),height:b.outerHeight()}:{width:b.width(),height:b.height()};this.originalPosition={left:e,top:f};this.sizeDiff={width:b.outerWidth()-b.width(),height:b.outerHeight()-b.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var h=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",h=="auto"?this.axis+"-resize":h);b.addClass("ui-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(b){var h=this.helper,n=this.options,k={},l=this,e=this.originalMousePosition,i=this.axis,f=b.pageX-e.left||0,g=b.pageY-e.top||0,d=this._change[i];if(!d)return false;var c=d.apply(this,[b,f,g]),m=a.browser.msie&&a.browser.version<7,j=this.sizeDiff;if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",b);h.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return false},_mouseStop:function(h){this.resizing=false;var e=this.options,b=this;if(this._helper){var c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),f=d&&a.ui.hasScroll(c[0],"left")?0:b.sizeDiff.height,g=d?0:b.sizeDiff.width,k={width:b.size.width-g,height:b.size.height-f},i=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null,j=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;!e.animate&&this.element.css(a.extend(k,{top:j,left:i}));b.helper.height(b.size.height);b.helper.width(b.size.width);this._helper&&!e.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",h);this._helper&&this.helper.remove();return false},_updateCache:function(a){var c=this.options;this.offset=this.helper.offset();if(b(a.left))this.position.left=a.left;if(b(a.top))this.position.top=a.top;if(b(a.height))this.size.height=a.height;if(b(a.width))this.size.width=a.width},_updateRatio:function(a){var f=this.options,c=this.position,b=this.size,d=this.axis;if(a.height)a.width=b.height*this.aspectRatio;else if(a.width)a.height=b.width/this.aspectRatio;if(d=="sw"){a.left=c.left+(b.width-a.width);a.top=null}if(d=="nw"){a.top=c.top+(b.height-a.height);a.left=c.left+(b.width-a.width)}return a},_respectSize:function(a,n){var p=this.helper,c=this.options,o=this._aspectRatio||n.shiftKey,m=this.axis,f=b(a.width)&&c.maxWidth&&c.maxWidth<a.width,e=b(a.height)&&c.maxHeight&&c.maxHeight<a.height,h=b(a.width)&&c.minWidth&&c.minWidth>a.width,g=b(a.height)&&c.minHeight&&c.minHeight>a.height;if(h)a.width=c.minWidth;if(g)a.height=c.minHeight;if(f)a.width=c.maxWidth;if(e)a.height=c.maxHeight;var l=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,j=/sw|nw|w/.test(m),i=/nw|ne|n/.test(m);if(h&&j)a.left=l-c.minWidth;if(f&&j)a.left=l-c.maxWidth;if(g&&i)a.top=k-c.minHeight;if(e&&i)a.top=k-c.maxHeight;var d=!a.width&&!a.height;if(d&&!a.left&&a.top)a.top=null;else if(d&&!a.top&&a.left)a.left=null;return a},_proportionallyResize:function(){var g=this.options;if(!this._proportionallyResizeElements.length)return;for(var c=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++){var b=this._proportionallyResizeElements[d];if(!this.borderDif){var e=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")],f=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];this.borderDif=a.map(e,function(d,c){var b=parseInt(d,10)||0,a=parseInt(f[c],10)||0;return b+a})}if(a.browser.msie&&!!(a(c).is(":hidden")||a(c).parents(":hidden").length))continue;b.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,f=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,b=d?1:0,c=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+c,height:this.element.outerHeight()+c,position:"absolute",left:this.elementOffset.left-b+"px",top:this.elementOffset.top-b+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(d,a){var f=this.options,b=this.originalSize,c=this.originalPosition;return{left:c.left+a,width:b.width-a}},n:function(d,e,a){var f=this.options,b=this.originalSize,c=this.originalPosition;return{top:c.top+a,height:b.height-a}},s:function(b,c,a){return{height:this.originalSize.height+a}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8.6"});a.ui.plugin.add("resizable","alsoResize",{start:function(){var d=a(this).data("resizable"),b=d.options,c=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10),position:b.css("position")})})};if(typeof b.alsoResize=="object"&&!b.alsoResize.parentNode)if(b.alsoResize.length){b.alsoResize=b.alsoResize[0];c(b.alsoResize)}else a.each(b.alsoResize,function(a){c(a)});else c(b.alsoResize)},resize:function(i,h){var b=a(this).data("resizable"),c=b.options,f=b.originalSize,e=b.originalPosition,g={height:b.size.height-f.height||0,width:b.size.width-f.width||0,top:b.position.top-e.top||0,left:b.position.left-e.left||0},d=function(d,c){a(d).each(function(){var d=a(this),f=a(this).data("resizable-alsoresize"),e={},i=c&&c.length?c:d.parents(h.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(i,function(c,a){var b=(f[a]||0)+(g[a]||0);if(b&&b>=0)e[a]=b||null});if(a.browser.opera&&/relative/.test(d.css("position"))){b._revertToRelativePosition=true;d.css({position:"absolute",top:"auto",left:"auto"})}d.css(e)})};if(typeof c.alsoResize=="object"&&!c.alsoResize.nodeType)a.each(c.alsoResize,function(a,b){d(a,b)});else d(c.alsoResize)},stop:function(){var c=a(this).data("resizable"),b=c.options,d=function(b){a(b).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};if(c._revertToRelativePosition){c._revertToRelativePosition=false;if(typeof b.alsoResize=="object"&&!b.alsoResize.nodeType)a.each(b.alsoResize,function(a){d(a)});else d(b.alsoResize)}a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(j){var b=a(this).data("resizable"),g=b.options,c=b._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),h=d&&a.ui.hasScroll(c[0],"left")?0:b.sizeDiff.height,i=d?0:b.sizeDiff.width,k={width:b.size.width-i,height:b.size.height-h},e=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null,f=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(a.extend(k,f&&e?{top:f,left:e}:{}),{duration:g.animateDuration,easing:g.animateEasing,step:function(){var d={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),10)};c&&c.length&&a(c[0]).css({width:d.width,height:d.height});b._updateCache(d);b._propagate("resize",j)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var b=a(this).data("resizable"),n=b.options,m=b.element,e=n.containment,d=e instanceof a?e.get(0):/parent/.test(e)?m.parent().get(0):e;if(!d)return;b.containerElement=a(d);if(/document/.test(e)||e==document){b.containerOffset={left:0,top:0};b.containerPosition={left:0,top:0};b.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var f=a(d),g=[];a(["Top","Right","Left","Bottom"]).each(function(b,a){g[b]=c(f.css("padding"+a))});b.containerOffset=f.offset();b.containerPosition=f.position();b.containerSize={height:f.innerHeight()-g[3],width:f.innerWidth()-g[1]};var h=b.containerOffset,k=b.containerSize.height,l=b.containerSize.width,j=a.ui.hasScroll(d,"left")?d.scrollWidth:l,i=a.ui.hasScroll(d)?d.scrollHeight:k;b.parentData={element:d,left:h.left,top:h.top,width:j,height:i}}},resize:function(m){var b=a(this).data("resizable"),g=b.options,o=b.containerSize,c=b.containerOffset,n=b.size,j=b.position,e=b._aspectRatio||m.shiftKey,d={top:0,left:0},i=b.containerElement;if(i[0]!=document&&/static/.test(i.css("position")))d=c;if(j.left<(b._helper?c.left:0)){b.size.width=b.size.width+(b._helper?b.position.left-c.left:b.position.left-d.left);if(e)b.size.height=b.size.width/g.aspectRatio;b.position.left=g.helper?c.left:0}if(j.top<(b._helper?c.top:0)){b.size.height=b.size.height+(b._helper?b.position.top-c.top:b.position.top);if(e)b.size.width=b.size.height*g.aspectRatio;b.position.top=b._helper?c.top:0}b.offset.left=b.parentData.left+b.position.left;b.offset.top=b.parentData.top+b.position.top;var f=Math.abs((b._helper?b.offset.left-d.left:b.offset.left-d.left)+b.sizeDiff.width),h=Math.abs((b._helper?b.offset.top-d.top:b.offset.top-c.top)+b.sizeDiff.height),l=b.containerElement.get(0)==b.element.parent().get(0),k=/relative|absolute/.test(b.containerElement.css("position"));if(l&&k)f-=b.parentData.left;if(f+b.size.width>=b.parentData.width){b.size.width=b.parentData.width-f;if(e)b.size.height=b.size.width/b.aspectRatio}if(h+b.size.height>=b.parentData.height){b.size.height=b.parentData.height-h;if(e)b.size.width=b.size.height*b.aspectRatio}},stop:function(){var b=a(this).data("resizable"),i=b.options,l=b.position,f=b.containerOffset,d=b.containerPosition,e=b.containerElement,c=a(b.helper),g=c.offset(),j=c.outerWidth()-b.sizeDiff.width,h=c.outerHeight()-b.sizeDiff.height;b._helper&&!i.animate&&/relative/.test(e.css("position"))&&a(this).css({left:g.left-d.left-f.left,width:j,height:h});b._helper&&!i.animate&&/static/.test(e.css("position"))&&a(this).css({left:g.left-d.left-f.left,width:j,height:h})}});a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),d=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof d.ghost=="string"?d.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("resizable"),e=b.options;b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("resizable"),e=b.options;b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(j){var b=a(this).data("resizable"),d=b.options,i=b.size,c=b.originalSize,g=b.originalPosition,h=b.axis,k=d._aspectRatio||j.shiftKey;d.grid=typeof d.grid=="number"?[d.grid,d.grid]:d.grid;var e=Math.round((i.width-c.width)/(d.grid[0]||1))*(d.grid[0]||1),f=Math.round((i.height-c.height)/(d.grid[1]||1))*(d.grid[1]||1);if(/^(se|s|e)$/.test(h)){b.size.width=c.width+e;b.size.height=c.height+f}else if(/^(ne)$/.test(h)){b.size.width=c.width+e;b.size.height=c.height+f;b.position.top=g.top-f}else if(/^(sw)$/.test(h)){b.size.width=c.width+e;b.size.height=c.height+f;b.position.left=g.left-e}else{b.size.width=c.width+e;b.size.height=c.height+f;b.position.top=g.top-f;b.position.left=g.left-e}}});var c=function(a){return parseInt(a,10)||0},b=function(a){return!isNaN(parseInt(a,10))}})(jQuery)