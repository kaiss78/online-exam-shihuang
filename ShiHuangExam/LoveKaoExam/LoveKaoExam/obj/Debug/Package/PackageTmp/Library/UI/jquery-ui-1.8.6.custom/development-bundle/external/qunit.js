(function(c){var b={module:function(c,d){a.currentModule=c;f(function(){a.currentModule&&b.moduleDone(a.currentModule,a.moduleStats.bad,a.moduleStats.all);a.currentModule=c;a.moduleTestEnvironment=d;a.moduleStats={all:0,bad:0};b.moduleStart(c,d)})},asyncTest:function(d,a,c){if(arguments.length===2){c=a;a=0}b.test(d,a,c,true)},test:function(n,j,s,t){var i='<span class="test-name">'+n+"</span>",g,r;if(arguments.length===2){s=j;j=null}if(j&&typeof j==="object"){r=j;j=null}if(a.currentModule)i='<span class="module-name">'+a.currentModule+"</span>: "+i;if(!q(a.currentModule+": "+n))return;f(function(){g=e({setup:function(){},teardown:function(){}},a.moduleTestEnvironment);r&&e(g,r);b.testStart(n,g);b.current_testEnvironment=g;a.assertions=[];a.expected=j;var f=d("qunit-tests");if(f){var h=document.createElement("strong");h.innerHTML="Running "+i;var c=document.createElement("li");c.appendChild(h);c.id="current-test-output";f.appendChild(c)}try{!a.pollution&&l();g.setup.call(g)}catch(k){b.ok(false,"Setup failed on "+i+": "+k.message)}});f(function(){t&&b.stop();try{s.call(g)}catch(c){o("Test "+i+" died, exception and test follows",c,s);b.ok(false,"Died on test #"+(a.assertions.length+1)+": "+c.message);l();a.blocking&&start()}});f(function(){try{p();g.teardown.call(g)}catch(a){b.ok(false,"Teardown failed on "+i+": "+a.message)}});f(function(){try{b.reset()}catch(t){o("reset() failed, following Test "+i+", exception and reset fn follows",t,reset)}a.expected&&a.expected!=a.assertions.length&&b.ok(false,"Expected "+a.expected+" assertions, but "+a.assertions.length+" were run");var r=0,f=0,s=d("qunit-tests");a.stats.all+=a.assertions.length;a.moduleStats.all+=a.assertions.length;if(s){for(var p=document.createElement("ol"),g=0;g<a.assertions.length;g++){var l=a.assertions[g],e=document.createElement("li");e.className=l.result?"pass":"fail";e.innerHTML=l.message||"(no message)";p.appendChild(e);if(l.result)r++;else{f++;a.stats.bad++;a.moduleStats.bad++}}if(f==0)p.style.display="none";var j=document.createElement("strong");j.innerHTML=i+" <b style='color:black;'>(<b class='fail'>"+f+"</b>, <b class='pass'>"+r+"</b>, "+a.assertions.length+")</b>";h(j,"click",function(){var a=j.nextSibling,b=a.style.display;a.style.display=b==="none"?"block":"none"});h(j,"dblclick",function(b){var a=b&&b.target?b.target:c.event.srcElement;if(a.nodeName.toLowerCase()=="span"||a.nodeName.toLowerCase()=="b")a=a.parentNode;if(c.location&&a.nodeName.toLowerCase()==="strong")c.location.search="?"+encodeURIComponent(m([a]).replace(/\(.+\)$/,"").replace(/(^\s*|\s*$)/g,""))});var e=d("current-test-output");e.id="";e.className=f?"fail":"pass";e.removeChild(e.firstChild);e.appendChild(j);e.appendChild(p);if(f){var q=d("qunit-testrunner-toolbar");if(q){q.style.display="block";d("qunit-filter-pass").disabled=null;d("qunit-filter-missing").disabled=null}}}else for(var g=0;g<a.assertions.length;g++)if(!a.assertions[g].result){f++;a.stats.bad++;a.moduleStats.bad++}b.testDone(n,f,a.assertions.length);!c.setTimeout&&!a.queue.length&&k()});f(k)},expect:function(b){a.expected=b},ok:function(d,c){c=i(c);b.log(d,c);a.assertions.push({result:!!d,message:c})},equal:function(b,a,c){g(a==b,b,a,c)},notEqual:function(b,a,c){g(a!=b,b,a,c)},deepEqual:function(c,a,d){g(b.equiv(c,a),c,a,d)},notDeepEqual:function(c,a,d){g(!b.equiv(c,a),c,a,d)},strictEqual:function(b,a,c){g(a===b,b,a,c)},notStrictEqual:function(b,a,c){g(a!==b,b,a,c)},raises:function(b,a){try{b();ok(false,a)}catch(c){ok(true,a)}},start:function(){if(c.setTimeout)c.setTimeout(function(){a.timeout&&clearTimeout(a.timeout);a.blocking=false;j()},13);else{a.blocking=false;j()}},stop:function(d){a.blocking=true;if(d&&c.setTimeout)a.timeout=c.setTimeout(function(){b.ok(false,"Test timed out");b.start()},d)}};b.equals=b.equal;b.same=b.deepEqual;var a={queue:[],blocking:true};(function(){for(var f=c.location||{search:"",protocol:"file:"},e=f.search.slice(1).split("&"),d=0;d<e.length;d++){e[d]=decodeURIComponent(e[d]);if(e[d]==="noglobals"){e.splice(d,1);d--;a.noglobals=true}else if(e[d].search("=")>-1){e.splice(d,1);d--}}a.filters=e;b.isLocal=!!(f.protocol==="file:")})();if(typeof exports==="undefined"||typeof require==="undefined"){e(c,b);c.QUnit=b}else{e(exports,b);exports.QUnit=b}e(b,{config:a,init:function(){e(a,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new Date,updateRate:1e3,blocking:false,autostart:true,autorun:false,assertions:[],filters:[],queue:[]});var f=d("qunit-tests"),c=d("qunit-banner"),b=d("qunit-testresult");if(f)f.innerHTML="";if(c)c.className="";b&&b.parentNode.removeChild(b)},reset:function(){c.jQuery&&jQuery("#main, #qunit-fixture").html(a.fixture)},triggerEvent:function(a,c,b){if(document.createEvent){b=document.createEvent("MouseEvents");b.initMouseEvent(c,true,true,a.ownerDocument.defaultView,0,0,0,0,0,false,false,false,false,0,null);a.dispatchEvent(b)}else a.fireEvent&&a.fireEvent("on"+c)},is:function(a,c){return b.objectType(c)==a},objectType:function(a){if(typeof a==="undefined")return"undefined";if(a===null)return"null";var b=Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]||"";switch(b){case"Number":return isNaN(a)?"nan":"number";case"String":case"Boolean":case"Array":case"Date":case"RegExp":case"Function":return b.toLowerCase()}return typeof a==="object"?"object":undefined},begin:function(){},done:function(){},log:function(){},testStart:function(){},testDone:function(){},moduleStart:function(){},moduleDone:function(){}});if(typeof document==="undefined"||document.readyState==="complete")a.autorun=true;h(c,"load",function(){b.begin();var m=e({},a);b.init();e(a,m);a.blocking=false;var k=d("qunit-userAgent");if(k)k.innerHTML=navigator.userAgent;var j=d("qunit-header");if(j)j.innerHTML='<a href="'+location.href+'">'+j.innerHTML+"</a>";var g=d("qunit-testrunner-toolbar");if(g){g.style.display="none";var i=document.createElement("input");i.type="checkbox";i.id="qunit-filter-pass";i.disabled=true;h(i,"click",function(){for(var b=document.getElementsByTagName("li"),a=0;a<b.length;a++)if(b[a].className.indexOf("pass")>-1)b[a].style.display=i.checked?"none":""});g.appendChild(i);var c=document.createElement("label");c.setAttribute("for","qunit-filter-pass");c.innerHTML="Hide passed tests";g.appendChild(c);var f=document.createElement("input");f.type="checkbox";f.id="qunit-filter-missing";f.disabled=true;h(f,"click",function(){for(var b=document.getElementsByTagName("li"),a=0;a<b.length;a++)if(b[a].className.indexOf("fail")>-1&&b[a].innerHTML.indexOf("missing test - untested code is broken code")>-1)b[a].parentNode.parentNode.style.display=f.checked?"none":"block"});g.appendChild(f);c=document.createElement("label");c.setAttribute("for","qunit-filter-missing");c.innerHTML="Hide missing tests (untested code is broken code)";g.appendChild(c)}var l=d("main")||d("qunit-fixture");if(l)a.fixture=l.innerHTML;a.autostart&&b.start()});function k(){if(a.doneTimer&&c.clearTimeout){c.clearTimeout(a.doneTimer);a.doneTimer=null}if(a.queue.length){a.doneTimer=c.setTimeout(function(){if(!a.queue.length)k();else f(k)},13);return}a.autorun=true;a.currentModule&&b.moduleDone(a.currentModule,a.moduleStats.bad,a.moduleStats.all);var h=d("qunit-banner"),g=d("qunit-tests"),i=["Tests completed in ",+new Date-a.started," milliseconds.<br/>",'<span class="passed">',a.stats.all-a.stats.bad,'</span> tests of <span class="total">',a.stats.all,'</span> passed, <span class="failed">',a.stats.bad,"</span> failed."].join("");if(h)h.className=a.stats.bad?"qunit-fail":"qunit-pass";if(g){var e=d("qunit-testresult");if(!e){e=document.createElement("p");e.id="qunit-testresult";e.className="result";g.parentNode.insertBefore(e,g.nextSibling)}e.innerHTML=i}b.done(a.stats.bad,a.stats.all)}function q(f){var d=a.filters.length,e=false;if(!d)return true;while(d--){var b=a.filters[d],c=b.charAt(0)=="!";if(c)b=b.slice(1);if(f.indexOf(b)!==-1)return!c;if(c)e=true}return e}function i(a){a=a===null?"":a+"";return a.replace(/[\&"<>\\]/g,function(a){switch(a){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return a}})}function g(g,e,c,d){d=i(d)||(g?"okay":"failed");d='<span class="test-message">'+d+"</span>";c=i(b.jsDump.parse(c));e=i(b.jsDump.parse(e));var f=d+', expected: <span class="test-expected">'+c+"</span>";if(e!=c)f+=' result: <span class="test-actual">'+e+"</span>, diff: "+b.diff(c,e);b.log(g,f);a.assertions.push({result:!!g,message:f})}function f(b){a.queue.push(b);a.autorun&&!a.blocking&&j()}function j(){var b=(new Date).getTime();while(a.queue.length&&!a.blocking)if(a.updateRate<=0||(new Date).getTime()-b<a.updateRate)a.queue.shift()();else{setTimeout(j,13);break}}function l(){a.pollution=[];if(a.noglobals)for(var b in c)a.pollution.push(b)}function p(){var d=a.pollution;l();var c=n(d,a.pollution);if(c.length>0){ok(false,"Introduced global variable(s): "+c.join(", "));a.expected++}var b=n(a.pollution,d);if(b.length>0){ok(false,"Deleted global variable(s): "+b.join(", "));a.expected++}}function n(e,d){for(var b=e.slice(),a=0;a<b.length;a++)for(var c=0;c<d.length;c++)if(b[a]===d[c]){b.splice(a,1);a--;break}return b}function o(d,a,b){if(typeof console!=="undefined"&&console.error&&console.warn){console.error(d);console.error(a);console.warn(b.toString())}else c.opera&&opera.postError&&opera.postError(d,a,b.toString)}function e(b,c){for(var a in c)b[a]=c[a];return b}function h(a,c,b){if(a.addEventListener)a.addEventListener(c,b,false);else if(a.attachEvent)a.attachEvent("on"+c,b);else b()}function d(a){return!!(typeof document!=="undefined"&&document&&document.getElementById)&&document.getElementById(a)}b.equiv=function(){var c,d=[],a=[];function e(e,a,d){var c=b.objectType(e);if(c)return b.objectType(a[c])==="function"?a[c].apply(a,d):a[c]}var f=function(){function e(b,a){return b instanceof a.constructor||a instanceof b.constructor?a==b:a===b}return{string:e,"boolean":e,number:e,"null":e,undefined:e,nan:function(a){return isNaN(a)},date:function(a,c){return b.objectType(a)==="date"&&c.valueOf()===a.valueOf()},regexp:function(a,c){return b.objectType(a)==="regexp"&&c.source===a.source&&c.global===a.global&&c.ignoreCase===a.ignoreCase&&c.multiline===a.multiline},"function":function(){var a=d[d.length-1];return a!==Object&&typeof a!=="undefined"},array:function(i,e){var d,f,g,h;if(!(b.objectType(i)==="array"))return false;h=e.length;if(h!==i.length)return false;a.push(e);for(d=0;d<h;d++){g=false;for(f=0;f<a.length;f++)if(a[f]===e[d])g=true;if(!g&&!c(e[d],i[d])){a.pop();return false}}a.pop();return true},object:function(h,e){var b,f,g,k=true,i=[],j=[];if(e.constructor!==h.constructor)return false;d.push(e.constructor);a.push(e);for(b in e){g=false;for(f=0;f<a.length;f++)if(a[f]===e[b])g=true;i.push(b);if(!g&&!c(e[b],h[b])){k=false;break}}d.pop();a.pop();for(b in h)j.push(b);return k&&c(i.sort(),j.sort())}}}();c=function(){var a=Array.prototype.slice.apply(arguments);return a.length<2?true:function(a,c){return a===c?true:a===null||c===null||typeof a==="undefined"||typeof c==="undefined"||b.objectType(a)!==b.objectType(c)?false:e(a,f,[c,a])}(a[0],a[1])&&arguments.callee.apply(this,a.splice(1,a.length-1))};return c}();b.jsDump=function(){function a(a){return'"'+a.toString().replace(/"/g,'\\"')+'"'}function c(a){return a+""}function e(e,a,c){var f=d.separator(),g=d.indent(),b=d.indent(1);if(a.join)a=a.join(","+f+b);return!a?e+c:[e,b+a,g+c].join(f)}function f(b){var a=b.length,c=Array(a);this.up();while(a--)c[a]=this.parse(b[a]);this.down();return e("[",c,"]")}var g=/^function (\w+)/,d={parse:function(c,a){var b=this.parsers[a||this.typeOf(c)];a=typeof b;return a=="function"?b.call(this,c):a=="string"?b:this.parsers.error},typeOf:function(a){var c;if(a===null)c="null";else if(typeof a==="undefined")c="undefined";else if(b.is("RegExp",a))c="regexp";else if(b.is("Date",a))c="date";else if(b.is("Function",a))c="function";else if(a.setInterval&&a.document&&!a.nodeType)c="window";else if(a.nodeType===9)c="document";else if(a.nodeType)c="node";else if(typeof a==="object"&&typeof a.length==="number"&&a.length>=0)c="array";else c=typeof a;return c},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(b){if(!this.multiline)return"";var a=this.indentChar;if(this.HTML)a=a.replace(/\t/g,"   ").replace(/ /g,"&nbsp;");return Array(this._depth_+(b||0)).join(a)},up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(b,a){this.parsers[b]=a},quote:a,literal:c,join:e,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(b){var a="function",c="name"in b?b.name:(g.exec(b)||[])[1];if(c)a+=" "+c;a+="(";a=[a,this.parse(b,"functionArgs"),"){"].join("");return e(a,this.parse(b,"functionCode"),"}")},array:f,nodelist:f,arguments:f,object:function(b){var c=[];this.up();for(var a in b)c.push(this.parse(a,"key")+": "+this.parse(b[a]));this.down();return e("{",c,"}")},node:function(b){var c=this.HTML?"&lt;":"<",a=this.HTML?"&gt;":">",e=b.nodeName.toLowerCase(),d=c+e;for(var g in this.DOMAttrs){var f=b[this.DOMAttrs[g]];if(f)d+=" "+g+"="+this.parse(f,"attribute")}return d+a+c+"/"+e+a},functionArgs:function(c){var a=c.length;if(!a)return"";var b=Array(a);while(a--)b[a]=String.fromCharCode(97+a);return" "+b.join(", ")+" "},key:a,functionCode:"[code]",attribute:a,string:a,date:a,regexp:c,number:c,"boolean":c},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:false,indentChar:"   ",multiline:false};return d}();function m(d){for(var b="",a,c=0;d[c];c++){a=d[c];if(a.nodeType===3||a.nodeType===4)b+=a.nodeValue;else if(a.nodeType!==8)b+=m(a.childNodes)}return b}b.diff=function(){function a(c,b){for(var d={},e={},a=0;a<b.length;a++){if(d[b[a]]==null)d[b[a]]={rows:[],o:null};d[b[a]].rows.push(a)}for(var a=0;a<c.length;a++){if(e[c[a]]==null)e[c[a]]={rows:[],n:null};e[c[a]].rows.push(a)}for(var a in d)if(d[a].rows.length==1&&typeof e[a]!="undefined"&&e[a].rows.length==1){b[d[a].rows[0]]={text:b[d[a].rows[0]],row:e[a].rows[0]};c[e[a].rows[0]]={text:c[e[a].rows[0]],row:d[a].rows[0]}}for(var a=0;a<b.length-1;a++)if(b[a].text!=null&&b[a+1].text==null&&b[a].row+1<c.length&&c[b[a].row+1].text==null&&b[a+1]==c[b[a].row+1]){b[a+1]={text:b[a+1],row:b[a].row+1};c[b[a].row+1]={text:c[b[a].row+1],row:a+1}}for(var a=b.length-1;a>0;a--)if(b[a].text!=null&&b[a-1].text==null&&b[a].row>0&&c[b[a].row-1].text==null&&b[a-1]==c[b[a].row-1]){b[a-1]={text:b[a-1],row:b[a].row-1};c[b[a].row-1]={text:c[b[a].row-1],row:a-1}}return{o:c,n:b}}return function(h,b){h=h.replace(/\s+$/,"");b=b.replace(/\s+$/,"");var c=a(h==""?[]:h.split(/\s+/),b==""?[]:b.split(/\s+/)),g="",e=h.match(/\s+/g);if(e==null)e=[" "];else e.push(" ");var f=b.match(/\s+/g);if(f==null)f=[" "];else f.push(" ");if(c.n.length==0)for(var d=0;d<c.o.length;d++)g+="<del>"+c.o[d]+e[d]+"</del>";else{if(c.n[0].text==null)for(b=0;b<c.o.length&&c.o[b].text==null;b++)g+="<del>"+c.o[b]+e[b]+"</del>";for(var d=0;d<c.n.length;d++)if(c.n[d].text==null)g+="<ins>"+c.n[d]+f[d]+"</ins>";else{var i="";for(b=c.n[d].row+1;b<c.o.length&&c.o[b].text==null;b++)i+="<del>"+c.o[b]+e[b]+"</del>";g+=" "+c.n[d].text+f[d]+i}}return g}}()})(this)