(function(a,e){var b="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},c={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(c){var b=a(this).css(c).offset().top;b<0&&a(this).css("top",c.top-b)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string")this.originalTitle="";this.options.title=this.options.title||this.originalTitle;var c=this,d=c.options,i=d.title||"&#160;",h=a.ui.dialog.getTitleId(c.element),g=(c.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(b+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){if(d.closeOnEscape&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){c.close(b);b.preventDefault()}}).attr({role:"dialog","aria-labelledby":h}).mousedown(function(a){c.moveToTop(false,a)}),k=c.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),f=(c.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),e=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){e.addClass("ui-state-hover")},function(){e.removeClass("ui-state-hover")}).focus(function(){e.addClass("ui-state-focus")}).blur(function(){e.removeClass("ui-state-focus")}).click(function(a){c.close(a);return false}).appendTo(f),j=(c.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(e),l=a("<span></span>").addClass("ui-dialog-title").attr("id",h).html(i).prependTo(f);if(a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose))d.beforeClose=d.beforeclose;f.find("*").add(f).disableSelection();d.draggable&&a.fn.draggable&&c._makeDraggable();d.resizable&&a.fn.resizable&&c._makeResizable();c._createButtons(d.buttons);c._isOpen=false;a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;a.overlay&&a.overlay.destroy();a.uiDialog.hide();a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");a.uiDialog.remove();a.originalTitle&&a.element.attr("title",a.originalTitle);return a},widget:function(){return this.uiDialog},close:function(d){var b=this,c;if(false===b._trigger("beforeClose",d))return;b.overlay&&b.overlay.destroy();b.uiDialog.unbind("keypress.ui-dialog");b._isOpen=false;if(b.options.hide)b.uiDialog.hide(b.options.hide,function(){b._trigger("close",d)});else{b.uiDialog.hide();b._trigger("close",d)}a.ui.dialog.overlay.resize();if(b.options.modal){c=0;a(".ui-dialog").each(function(){if(this!==b.uiDialog[0])c=Math.max(c,a(this).css("z-index"))});a.ui.dialog.maxZ=c}return b},isOpen:function(){return this._isOpen},moveToTop:function(f,e){var b=this,c=b.options,d;if(c.modal&&!f||!c.stack&&!c.modal)return b._trigger("focus",e);if(c.zIndex>a.ui.dialog.maxZ)a.ui.dialog.maxZ=c.zIndex;if(b.overlay){a.ui.dialog.maxZ+=1;b.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}d={scrollTop:b.element.attr("scrollTop"),scrollLeft:b.element.attr("scrollLeft")};a.ui.dialog.maxZ+=1;b.uiDialog.css("z-index",a.ui.dialog.maxZ);b.element.attr(d);b._trigger("focus",e);return b},open:function(){if(this._isOpen)return;var b=this,d=b.options,c=b.uiDialog;b.overlay=d.modal?new a.ui.dialog.overlay(b):null;b._size();b._position(d.position);c.show(d.show);b.moveToTop(true);d.modal&&c.bind("keypress.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey){d.focus(1);return false}else if(b.target===d[0]&&b.shiftKey){e.focus(1);return false}});a(b.element.find(":tabbable").get().concat(c.find(".ui-dialog-buttonpane :tabbable").get().concat(c.get()))).eq(0).focus();b._isOpen=true;b._trigger("open");return b},_createButtons:function(b){var c=this,e=false,d=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(d);c.uiDialog.find(".ui-dialog-buttonpane").remove();typeof b==="object"&&b!==null&&a.each(b,function(){return!(e=true)});if(e){a.each(b,function(e,b){b=a.isFunction(b)?{click:b,text:e}:b;var d=a('<button type="button"></button>').attr(b,true).unbind("click").click(function(){b.click.apply(c.element[0],arguments)}).appendTo(f);a.fn.button&&d.button()});d.appendTo(c.uiDialog)}},_makeDraggable:function(){var b=this,e=b.options,f=a(document),d;function c(a){return{position:a.position,offset:a.offset}}b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,g){d=e.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",f,c(g))},drag:function(a,d){b._trigger("drag",a,c(d))},stop:function(h,g){e.position=[g.position.left-f.scrollLeft(),g.position.top-f.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(d);b._trigger("dragStop",h,c(g));a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){c=c===e?this.options.resizable:c;var b=this,d=b.options,h=b.uiDialog.css("position"),g=typeof c==="string"?c:"n,e,s,w,se,sw,ne,nw";function f(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}b.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:b.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:b._minHeight(),handles:g,start:function(c,d){a(this).addClass("ui-dialog-resizing");b._trigger("resizeStart",c,f(d))},resize:function(a,c){b._trigger("resize",a,f(c))},stop:function(c,e){a(this).removeClass("ui-dialog-resizing");d.height=a(this).height();d.width=a(this).width();b._trigger("resizeStop",c,f(e));a.ui.dialog.overlay.resize()}}).css("position",h).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],e=[0,0],d;if(b){if(typeof b==="string"||typeof b==="object"&&"0"in b){c=b.split?b.split(" "):[b[0],b[1]];if(c.length===1)c[1]=c[0];a.each(["left","top"],function(a,b){if(+c[a]===c[a]){e[a]=c[a];c[a]=b}});b={my:c.join(" "),at:c.join(" "),offset:e.join(" ")}}b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;d=this.uiDialog.is(":visible");!d&&this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(b);!d&&this.uiDialog.hide()},_setOptions:function(f){var g=this,b={},e=false;a.each(f,function(a,f){g._setOption(a,f);if(a in d)e=true;if(a in c)b[a]=f});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(h,c){var d=this,e=d.uiDialog;switch(h){case"beforeclose":h="beforeClose";break;case"buttons":d._createButtons(c);break;case"closeText":d.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":e.removeClass(d.options.dialogClass).addClass(b+c);break;case"disabled":if(c)e.addClass("ui-dialog-disabled");else e.removeClass("ui-dialog-disabled");break;case"draggable":var g=e.is(":data(draggable)");g&&!c&&e.draggable("destroy");!g&&c&&d._makeDraggable();break;case"position":d._position(c);break;case"resizable":var f=e.is(":data(resizable)");f&&!c&&e.resizable("destroy");f&&typeof c==="string"&&e.resizable("option","handles",c);!f&&c!==false&&d._makeResizable(c);break;case"title":a(".ui-dialog-title",d.uiDialogTitlebar).html(""+(c||"&#160;"))}a.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var b=this.options,d,c;this.element.show().css({width:"auto",minHeight:0,height:0});if(b.minWidth>b.width)b.width=b.minWidth;d=this.uiDialog.css({height:"auto",width:b.width}).height();c=Math.max(0,b.minHeight-d);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:c,height:"auto"});else{this.uiDialog.show();var e=this.element.css("height","auto").height();this.uiDialog.hide();this.element.height(Math.max(e,c))}else this.element.height(Math.max(b.height-d,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.6",uuid:0,maxZ:0,getTitleId:function(b){var a=b.attr("id");if(!a){this.uuid+=1;a=this.uuid}return"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(c){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return false})},1);a(document).bind("keydown.dialog-overlay",function(b){if(c.options.closeOnEscape&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE){c.close(b);b.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var b=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(c){this.oldInstances.push(this.instances.splice(a.inArray(c,this.instances),1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");c.remove();var b=0;a.each(this.instances,function(){b=Math.max(b,this.css("z-index"))});this.maxZ=b},height:function(){var b,c;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return b<c?a(window).height()+"px":b+"px"}else return a(document).height()+"px"},width:function(){var b,c;if(a.browser.msie&&a.browser.version<7){b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return b<c?a(window).width()+"px":b+"px"}else return a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery)