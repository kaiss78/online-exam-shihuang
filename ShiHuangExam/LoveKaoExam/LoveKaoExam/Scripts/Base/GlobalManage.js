var GlobalManage={getCookie:function(c,e,d){var a=d||document.cookie;if(a.length>0){c_start=a.indexOf(c+"=");if(c_start!=-1){c_start=c_start+c.length+1;c_end=a.indexOf(d?"&":";",c_start);if(c_end==-1)c_end=a.length;var b=unescape(a.substring(c_start,c_end));return e!=null?this.getCookie(e,null,b):b}}return null},get_cookie_uid:function(){return this.getCookie("UserInfo","UserGuid",null)},get_cookie_uname:function(){return this.getCookie("UserInfo","Uname",null)},get_cookie_utype:function(){return this.getCookie("UserInfo","UType",null)},getUrlArg:function(){var a=window.location.search,d=a.indexOf("?"),e={};if(d!=-1)for(var f=a.substring(d+1,a.length).split("&"),b,c=0;c<f.length;c++){b=f[c].split("=");e[b[0]]=b[1]}return e},imgError:function(a,b){switch(b){case"hidden-own":a.style.display="none";break;case"hidden-parent-1":a.parentNode.style.display="none"}},rtrim:/^(\s|\u00A0)+|(\s|\u00A0)+$/g,trim:function(a){return(a||"").replace(this.rtrim,"")},isEmptyOrNull:function(a){return a==null||this.trim(a)==""?true:false},isunde:function(a){return typeof a=="undefined"},clone:function(a){var b;if(a instanceof Array){b=[];var c=a.length;while(c--)b[c]=this.clone(a[c]);return b}else if(a instanceof Function)return a;else if(a instanceof Object){b={};for(var d in a)b[d]=this.clone(a[d]);return b}else return a},encode分类:function(a){a=encodeURI(a);return a.replace("#","%23")},UrlRewrite分类_详细:function(a){return"/fenlei/xiangxi-----"+this.encode分类(a)+".html"},UrlRewrite分类_试卷:function(a){return"/fenlei/shijuan-----"+type+"-----"+this.encode分类(a)+"-----"+index+".html"},UrlRewrite分类_试题:function(a){return"/fenlei/shiti-----"+type+"-----"+this.encode分类(a)+"-----"+index+".html"},UrlRewrite分类_树状:function(a){return"/fenlei/shuzhuang-----"+this.encode分类(a)+".html"}};function DynamicLoad(){var a=this;this.isie=navigator.userAgent.toLowerCase().indexOf("msie")!=-1;this.Load=function(e,c){if(a.IsLoaded(e)){c&&c(true);return false}else{var b,f=a.GetSrcType(e);if(f=="js"){b=document.createElement("script");b.src=e;b.type="text/javascript";b.language="javascript"}else if(f=="css"){b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href=e}else return false;var d=document.getElementsByTagName("head");d&&d[0].appendChild(b);if(!a.isie)if(f=="css")c&&c();else b.onload=function(){c&&c()};else b.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete")c&&c()};b.onerror=function(){d&&d[0].removeChild(b)};return false}};this.IsLoaded=function(d){var e=false,h=a.GetSrcType(d),c;if(h=="js"){var f=document.getElementsByTagName("script"),b;for(c=0;c<f.length;c++){b=f[c];d=d.replace(/\.\.\/|\.\//g,"");if(b.src&&b.src.indexOf(d)!=-1)if(!a.isie){e=true;break}else if(b.readyState=="loaded"||b.readyState=="complete"){e=true;break}}}else if(h=="css"){var g=document.getElementsByTagName("link"),b;for(c=0;c<g.length;c++){b=g[c];d=d.replace(/\.\.\/|\.\//g,"");if(b.href&&b.href.indexOf(d)!=-1)if(!a.isie){e=true;break}else if(b.readyState=="loaded"||b.readyState=="complete"||b.readyState=="interactive"){e=true;break}}}return e};this.GetSrcType=function(c){var b="",a=c.lastIndexOf(".");if(a!=-1)b=c.substr(a+1);return b.toLowerCase()}}var LK_LoginReg={DEFAULTS:{是否显示登录页面:true,是否都要打开窗口:false,是否提示未登录:false,是否现登录或注册成功回调函数:false,是否设置导航欢迎:true,用户名:"",邮箱地址:"",预回调函数:function(){},关闭之前回调函数:function(){},关闭之后回调函数:function(){},显示之前回调函数:function(){},显示之后回调函数:function(){}},data:{现登录或注册已成功:false},options:{},extend:function(a){this.data.现登录或注册已成功=false;this.options=GlobalManage.clone(this.DEFAULTS);for(var b in a)this.options[b]=a[b]},welcome:function(){},callback:function(){var b=GlobalManage.get_cookie_uid(),a=this.options,c=this.data;if(b!=null){a.是否设置导航欢迎&&this.welcome(GlobalManage.get_cookie_uname(),b);if(a.是否现登录或注册成功回调函数&&!c.现登录或注册已成功)return;this.fire("预回调函数")}},title:function(a){this.boxy&&this.boxy.setTitle(a)},load:function(b){var a=new DynamicLoad;a.Load(LKConfig.URLAssembly.LK_LoginReg.StyleSheet.get("Boxy"),function(){a.Load(LKConfig.URLAssembly.LK_LoginReg.JavaScript.get("jQuery"),function(){a.Load(LKConfig.URLAssembly.LK_LoginReg.JavaScript.get("Boxy"),function(){b&&b()})})})},boxy:0,init:function(){var a=this,b=this.options,d='<iframe frameborder="0" scrolling="no" width="700px" height="410px" ></iframe>',c="isiframe=true&uname="+b.用户名+"&uemail="+b.邮箱地址,f="Register.htm?"+c,e="Login.htm?ismsg="+b.是否提示未登录+"&"+c,g=LKConfig.URLAssembly.LK_LoginReg.HTM.get("LoginReg")+(b.是否显示登录页面?e:f);this.boxy=this.boxy||new Boxy(d,{title:"loading...",show:false,modal:true,fixed:true,beforeHide:function(){a.fire("关闭之前回调函数")},beforeShow:function(){a.fire("显示之前回调函数")},afterShow:function(){a.fire("显示之后回调函数")}});this.boxy.options.afterHide=function(){a.callback();a.boxy.setContent(d);a.fire("关闭之后回调函数")};this.boxy.show();this.boxy.setTitle(b.是否显示登录页面?"登录":"免费注册");this.boxy.set内部对象属性("iframe","src",g)},show:function(a){this.extend(a);var c=this,b=this.options,d=GlobalManage.get_cookie_uid();if(!b.是否都要打开窗口&&d!=null)this.callback();else this.load(function(){c.init()})},hide:function(){this.boxy&&this.boxy.hide()},close_btn:function(a){this.boxy&&this.boxy.setCloseVis(a)},fire:function(b){var a=this.options[b];typeof a=="function"&&a.call(this)},default_mp:function(a){this.show({是否显示登录页面:a})}}